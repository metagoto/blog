{% for (i in posts) : %}
<div class="post">
  <div class="meta">
    <p>{%:r= posts[i].date.toDateString() %}</p>
    <p>{%:r= posts[i].cats.map(function (t) {
      return '<a href="/category/'+t._id+'">'+t.name+'</a>';
    }).join(", ") %}</p>
    <p>{%:r= posts[i].tags.map(function (t) {
      return '<a href="/tag/'+t._id+'">'+t.name+'</a>';
    }).join(", ") %}</p>
    <p>{%= posts[i].numComs %} comment{%= posts[i].numComs > 1 ? "s" : ""%}</p>
  </div>
  <h2><a href="/post/{%= posts[i]._id %}">{%= posts[i].title %}</a></h2>
  <div class="entry">{%:r= posts[i].content %}</div>
</div>
{% end %}

<div id="pagi">
{% if (prevPageNum) : %}
<span class="prev"><a href="/page/{%= prevPageNum %}">&#171; newer</a></span>
{% end %}
{% if (nextPageNum) : %}
<span class="next"><a href="/page/{%= nextPageNum %}">older &#187;</a></span>
{% end %}
</div>
